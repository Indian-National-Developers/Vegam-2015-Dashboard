<!DOCTYPE html>
<html lang="en">
	<head>
				<meta charset="utf-8">
		<meta name="author" content="Sunil, Priya, Thina, saiy2k,Gayathri">

		<meta name="format-detection" content="telephone=no" />
		        <title> Home | Vegam2016 </title>
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

		<!--<link rel="icon" href="images/favicon.ico">
		<link rel="shortcut icon" href="images/favicon.ico" />-->
<link rel="stylesheet" href="css/countdown.css">
		<link rel="stylesheet" href="css/style_common.css" />
		<link rel="stylesheet" href="css/style4.css" />
		<link rel="stylesheet" href="css/camera.css">
		<link rel="stylesheet" href="css/style.css">
		
		<link rel="stylesheet" href="static/endcredits.css">
        <link type="text/css" rel="stylesheet" href="vegam.css"/>

		<script src="js/jquery.js"></script>
		<script src="js/jquery-migrate-1.2.1.js"></script>
		<script src="js/script.js"></script>
		<script src="js/jquery.ui.totop.js"></script>
		<script src="js/jquery.mobilemenu.js"></script>
		<!--[if (gt IE 9)|!(IE)]><!-->
		<script src="js/jquery.mobile.customized.min.js"></script>
		<!--<![endif]-->

		<meta charset="utf-8" />
		  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
		  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
		  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
		  <script type="text/javascript">

            //Parse.initialize("avx8N1dxzO7BU1QTkrSGC0ibcowObI9Q4kvikfn2", "ndSz3O9ZMkpjQtaRUrNcLOsVHfbWT9hwxaxSSgO5");
            $( document ).ready(function() {
                //2K15
                //Parse.initialize("BlYcmQmAAvCsDdanA7TJh14KiHrCCqb3z5vPz1Ay", "ovGdJ7e9MJ0wqqcsadYauC9t5aiXvluiuqBrvf3x");

                //2K16
                Parse.initialize("xDSozIKPzcsfEtMJSUpqh88nIJ8gyBZOFpmJIjn0", "rqLvdUmxNKcm8o6tLv9aSCabWHxoi4p6ziJ8wDog");

                var UserClass = Parse.Object.extend("User");
                var query = new Parse.Query(UserClass);
                query.find({
                    success: function(results) {
                        console.log(results);
                        userSelect  =   document.getElementById('userNameTextBox');
                        results.forEach(function(user) {
                            userSelect.options[userSelect.options.length] = new Option(user.get('username'), user.get('username'));
                            console.log(user.get('username'));
                        });
                    }, error: function(error) {
                    }
                });

                $('#passwordTextBox').keypress(function(e) {
                    if(e.which == 13) {
                        loginButtonClick();
                    }
                });

            });

            function loginButtonClick() {
                var uName       =   document.getElementById('userNameTextBox').value;
                var pass        =   document.getElementById('passwordTextBox').value;

                Parse.User.logIn(uName, pass, {
                    success: function(user) {
                        sessionStorage.school   =   user.id;
                        window.location         =   "studentRegistration.html";
                    },
                    error: function(user, error) {
                        alert('Wrong username or password');
                        console.log(error); 
                    }
                });
            }
	        	
        </script>
		  <script>
		  $(function() {
		    $( "#tabs" ).tabs();
		  });
		  </script>



        <script type="text/javascript" src="https://www.parse.com/downloads/javascript/parse-1.3.2.js"></script>

		<script>
			$(document).ready(function(){
				jQuery('#camera_wrap').camera({
					loader: false,
					pagination: false ,
					minHeight: '444',
					thumbnails: false,
					height: '27.86458333333333%',
					caption: true,
					navigation: true,
					fx: 'simpleFade'
				});
				$().UItoTop({ easingType: 'easeOutQuart' });
			});
		</script>
		
		<script src="static/endcredits.js"></script>
		<script src="js/jquery.equalheights.js"></script>
		<script src="js/superfish.js"></script>
		<script src="js/camera.js"></script>
        
 
		<!--[if lt IE 8]>
			<div style=' clear: both; text-align:center; position: relative;'>
				<a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
					<img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." />
				</a>
			</div>
		<![endif]>
		<!--[if lt IE 9]>
		<script src="js/html5shiv.js"></script>
		<link rel="stylesheet" media="screen" href="css/ie.css">
		<![endif]-->
	</head>
	<body bgcolor="#FAEBD7" class="page1" id="top" >
		
		<div class="main">
<!--==============================header=================================-->
			<header>
				<div class="container_12">
					<div class="grid_12">
						<!--<div class="socials">
							<a href="#" class="fa fa-twitter"></a>
							<a href="#" class="fa fa-facebook"></a>
							<a href="#" class="fa fa-google-plus"></a>
							<a href="#" class="fa fa-instagram"></a>
						</div>-->
						<div style="width: 100%; display: inline-block">
							<p align="left" style="float: left;">In association with...</p><img src="images/radio.png" style="float: left; width: 15%" >
							<img src="images/news7.gif" style="float: right; width: 19%" ><p align="right" style="float: right;">Our Media Partner,</p>
							<img src="k.png"><p align="center">_an Initiative by Chennai Social Service</p>
					</div>
						<div class="menu_block">
							<nav class="horizontal-nav full-width horizontalNav-notprocessed">
								<ul class="sf-menu">
									<li><a href="index.html" style="color:#2b2929">Home</a></li>
									<li><a href="./How.pdf" style="color:#2b2929">Guide</a></li>
									<!--<li><a href="index-2.html">Race Calendar</a></li>-->
									<li class="current"><a href="login.html" style="color:#2b2929">Login/Register</a></li>
									<!--<li><a href="broucher.html" style="color:#2b2929">Brochure</a></li>-->
									<!--<li><a href="#">Contacts</a></li>-->
									
								</ul>
							</nav>
						</div>

					</div>
					<div class="clear"></div>
				</div>
			</header>



<!--==============================Content=================================-->
 
			<div class="content"style="background-color:#FDFDFD"><div class="ic"></div>
				<div class="container_12">
					</div>
					<div class="clear"></div>
					<div class="container_12" style="color:#aad8ca">
					<div class="grid_12">
			<div id="tabs" align="center">
			  <ul style="float: center">
			  	<li><a href="#tabs-1">School Registration</a></li>
				<li><a href="#tabs-2">Individual Registration</a></li>
				<li><a href="#tabs-3">Volunteers</a></li>
			  </ul>

			  <div id="tabs-1">
				<div class="clear"></div>
					<div class="smallLabel"> School Name </div> <select id="userNameTextBox" style="width: 160px"/> 
                    </select> <br/> <br/>
                    <div class="smallLabel"> Password  </div> <input type="password" id='passwordTextBox' style="width:160px" /> <br/> <br/>
                    <div class="button" onclick="loginButtonClick()" style="margin-right:20px; margin-left:10px;">Login &rarr;</div>
                    <a href="./schoolRegistration_2016.html" class="button" style="width: 160px">Register School &rarr;</a> <br/> <br/>

                    <a href="./password_2016.html" style="width: 180px; margin-left: 10px;color:#0d0d61"> Forgot password? </a> <br/> 
			  </div>

			  <div id="tabs-2">
				<form >
                <div class="smallLabel"> Student Name *    </div> <input style="width: 34%;" type="text"       id="studName" /> <br/> <br/>
                <div class="smallLabel"> Roll No    </div> <input style="width: 34%;" type="text"       id="roll" /> <br/> <br/>
				<div class="smallLabel"> Age *    </div> <input style="width: 34%;" type="text"       id='age' onblur="" /> <br/> <br/>
                <div class="smallLabel"> Gender *         </div>	<select id='gender' style="width: 34.5%;" onchange=""> 
																				
																				<option value="M">MALE</option>
																				<option value="F">FEMALE</option>
																			</select>
																 
				<br/> <br/>
				<div class="smallLabel"> Disability category*       </div> <select id='category' style="width: 34.5%;" onchange="levelDisplay()"> 
																				
																				<option value="VI">Visually Impaired</option>
																				<option value="HI">Hearing Impaired</option>
																				<option value="MR">Mentally Retarded</option>
																				<option value="MD">Multi Disordered</option>
																			</select>
																			<br/> <br/>
                <div id="MRLevel" style="display: none"><div class="smallLabel"> Disability level *   </div>  <select id='mrlevel' style="width: 34.5%;" onchange=""> 
																				
																				<option value="1">Mild</option>
																				<option value="2">Moderate</option>
																				<option value="3">Severe</option>
																	  </select></div><div id="nl"></div>
				
				<div id="VILevel"><div class="smallLabel"> Disability level *   </div>  <select id='vilevel' style="width: 34.5%;" onchange=""> 
																				
																				<option value="1">Partial Blind</option>
																				<option value="2">Fully Blind</option>
                                                                        </select></div><div id="nl"></div> <br/>
										
				
				                           
                <div class="smallLabel"> School Name       </div> <input style="width: 34%;" type="text"       id="schoolName" /> <br/> <br/>
                <div class="smallLabel"> Phone Number *        </div> <input style="width: 34%;" type="text"       id="phone" /> <br/> <br/>
                <div class="smallLabel"> e-Mail ID *        </div> <input style="width: 34%;" type="text"       id="email" />
                <div class="button" onclick="indEventDisplay()" style="margin-left:"> Confirm </div>
                 <br/> <br/>
                <div class="halfColumn" style="color: #00248F;margin: 0 -10em 0 0;font-size: 16px;font-family: Arial;"> Select Event </div> <div id="eventRow" > </div> <br/> <br/>
                <div class="button" onclick="checkIndividual()" style="margin-left:"> Register </div>
			</form>
			<style type="text/css">.smallLabel{ text-align: left; }</style>
			  </div>

			  <div id="tabs-3">
				<iframe src="https://docs.google.com/forms/d/1SN2-PCSv8EUEDVtyhMCGsqFbIBcNeN5PzZadHbXCBK4/viewform?embedded=true" width="1000" height="500" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>
			  </div>
			</div>
		
		<div id="titles" style="position:fixed; top:0px; left: 0px;">
            <div id="credits">
            <div id="the-end"> Vegam Portal </div>
            <br />
            <h1>Developers</h1>
            <dl>
            <dd>G Surendar Thina</dd>
            <dd>Priya Thiruvenkadam</dd>
            <dd>Sunil Kumar Mishra</dd>
            <dd>Saiyasodharan Darth Vader</dd>
			<dd>Gayathri N</dd>
            </dl>
            <h1>Special Thanks to</h1>
            <dl>
            <dt>Requirement Document</dt>
            <dd>Yuvaraj Soundarapandian</dd>
            <dt>Content Writeup</dt>
            <dd>Kanchan Asrani</dd>
            <h1>With support from</h1>
            <dl>
            <dt>Product Owner</dt>
            <dd>Prithviraj Franklin</dd>
            <dt>Event Organizer</dt>
            <dd>Venkat RV</dd>
            <h1> ****** </h1>
            <h1 style="font-size:32px"> Chennai Social Service </h1>
            <h1> Indian National Developers </h1>
            <h1> ****** </h1>
            <h1> Share your Living </h1>
            <h1> ****** </h1>
            </div>
            <div class="clearfix"></div>
        </div>


<!--==============================footer=================================-->
		<footer style="background-color:">
			<div class="container_12">
				<div class="grid_12">
					<div class="f_logo">
						<a href="index.html" style="font-family: Montserrat">Vegam 2016</a>
					</div>
					<div style="color: black">
						For Technical Queries., <a href="mailto:saiy2k@gmail.com" class="mail_link"><i class="fa fa-envelope"></i> sai2k@gmail.com</a>
						<!--<div class="f_phone"><span class="fa fa-phone"></span>+1 800 559 6580</div>-->

					</div>
					
					<div class="copy" style="color:black">
						<!--<a href="#creditos" target="_blank" name="creditos" style="width: 110px; position: fixed; top:38%; right:0%; background-color:#aaa; color:#00f; z-index:100"> Credits </a>-->
						<!--<a href="#creditos" style="width: 240px; position: fixed; background-color:#aaa; color:#00f;"> Credits </a>-->
						<!--<span>Vegam &copy; | <a href="#">Privacy Policy</a></span>-->
						<a href="http://chennaisocialservice.org/" target="_blank"> Chennai Social Service </a> &nbsp | &nbsp Powered by <a href="http://think-digital.in" target="_blank">Think-Digital</a> &nbsp | &nbsp Use <a href="https://www.google.com/chrome/browser/desktop/">Chrome</a>, <a href="https://www.mozilla.org/en-US/firefox/new/">Firefox</a> to properly use this site.</p>
					
					</div>
				</div>
				<div class="clear"></div>
			</div>
		</footer>
		<script src="js/jquery.countdown.js"></script>
		<script src="js/cd_config.js"></script>
		<script src="js/modernizr.custom.69142.js"></script>
		<script type="text/javascript">
			Modernizr.load({
				test: Modernizr.csstransforms3d && Modernizr.csstransitions,
				yep : ['http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js','js/jquery.hoverfold.js'],
				nope: 'css/fallback.css',
				callback : function( url, result, key ) {
					if( url === 'js/jquery.hoverfold.js' ) {
						$( '#grid' ).hoverfold();
					}
				}
			});
		</script>
	</body>
</html>
<script type="text/javascript">

    $( document ).ready(function() {
			
    });
function checkButtonClick(){

	var name            =   document.getElementById("studName");
	var roll          	=   document.getElementById("roll");
	var age         	=   document.getElementById("age");
	var gender        	=   document.getElementById("gender");
	var category        =   document.getElementById("category");
	var mrlevel         =   document.getElementById("mrlevel");
	var vilevel         =   document.getElementById("vilevel");
	var schoolName      =   document.getElementById("schoolName");
	var contact         =   document.getElementById("phone");
	var email           =   document.getElementById("email");
	
	
    var nameValue       =   name.value;
    var rollValue    	=   roll.value;
	var ageValue		=	age.value;
	var genderValue		=	gender.value;
	var catValue		=	category.value;
	var mrlevelValue	=	mrlevel.value;
	var vilevelValue	=	vilevel.value;
	var schoolNameValue	=	schoolName.value;
	var contactValue    =   contact.value;
	var emailValue      =   email.value;
	
    var atpos = emailValue.indexOf("@");
    var dotpos = emailValue.lastIndexOf(".");
	var inputElems = document.getElementsByTagName("input"),
    count = 0;
	for (var i=0; i<inputElems.length; i++) {
    if (inputElems[i].type === "checkbox" && inputElems[i].checked === true) {
        count++;
    }
	}
	
	/*
			console.log(nameValue);
			console.log(rollValue);
			console.log(ageValue);
			console.log(genderValue);
			console.log(catValue);
			
			console.log(schoolNameValue);
			console.log(contactValue);
			console.log(emailValue);
	
	*/
	
	if(nameValue.length<5)
        alert("Student Name should contain atleast 5 characters!!");
		else if (rollValue.langth==="")
			alert("Please enter a valid Roll Number");
			else if(isNaN(ageValue))
			alert("Please enter a valid Age");
			else if(ageValue.length===0)
				alert("Pleaseenter a valid age");
			else if (ageValue<6)
			alert("Age has to be more than 5");
				else if (ageValue>25)
				alert("Age has to be less than 26");
					else if (contactValue== "")
					alert("You didn't enter a phone number.");
						else if (isNaN(contactValue)) 
						alert("The phone number contains invalid characters.");
							else if (!(contactValue.length == 10)) 
							alert("The phone number is the wrong length. \nPlease enter 10 digit mobile no.");
								else if (atpos< 1 || dotpos<atpos+2 || dotpos+2>=emailValue.length)
								alert("This doesn't seem to a Valid email-id");
									else if(count>2)
									alert("Only 2 events can be selected!");
										else if(count===0)
										alert("Atleast 1 event has to be selected!");
											else{
												//registerButtonClick();
												saveButtonClick();
												console.log("DONE");
											
}

};

function saveButtonClick(){
	var INDIVIDUAL = Parse.Object.extend("INDIVIDUAL");
	var details = new INDIVIDUAL();
    var categoryValue       =   document.getElementById("category");
    var eventCell           =   $("#eventRow");
    var checkedBoxes        =   eventCell.find(":checked")
	 
	var name            =   document.getElementById("studName");
	var roll          	=   document.getElementById("roll");
	var age         	=   document.getElementById("age");
	var gender        	=   document.getElementById("gender");
	var category        =   document.getElementById("category");
	var mrlevel         =   document.getElementById("mrlevel");
	var vilevel         =   document.getElementById("vilevel");
	var schoolName      =   document.getElementById("schoolName");
	var contact         =   document.getElementById("phone");
	var email           =   document.getElementById("email");
    var nameValue       =   name.value;
    var rollValue    	=   roll.value;
	var ageValue		=	age.value;
	var genderValue		=	gender.value;
	var catValue		=	category.value;
	var mrlevelValue	=	mrlevel.value;
	var vilevelValue	=	vilevel.value;
	var schoolNameValue	=	schoolName.value;
	var contactValue    =   contact.value;
	var emailValue      =   email.value;
    //showOverlayOnRowIndex(index);
	
    details.set("USERNAME", nameValue);
    details.set("ROLLNUMBER",rollValue);
    details.set("GENDER",genderValue);
    details.set("AGE", parseInt(ageValue));
    details.set("CATEGORY", catValue);
    details.set("event1", null);
    details.set("event2", null);
    details.set('school', schoolNameValue);
	details.set('EMAIL', emailValue);
	details.set('PHONE', contactValue);
    if(catValue == "MR") {
        details.set("LEVEL", mrlevelValue);
    } else if (catValue == "VI") {
        details.set("LEVEL", vilevelValue);
    }
	console.log('go on');
	var checkLength         =   checkedBoxes.length;
    checkedBoxes.each(function(i) {
        var eventsClass     =   Parse.Object.extend("EVENTS");
        var query           =   new Parse.Query(eventsClass);
        query.get(this.getAttribute('id'), {
            success:function(obj) {
                if (i == 0) {
                    details.set('event1', obj);
                } else if (i == 1) {
                    details.set('event2', obj);
                }
                if (i == checkLength - 1) {
                    details.save(null, {
                        success: function(studentObj) {
                            alert("You have been successfully registered!");
                            window.location= "indRegistration.html";
                        },
                        error: function(studentObj, error) {
                            alert('Failed to create new object, with error code: ' + error.message);
                        }
                    });
                }
				
				
            }, error: function (obj) {
            }
        });
    });
				
};

function levelDisplay(){
	var category        =   document.getElementById("category");
	var catValue		=	category.value;
	if(catValue==="VI"){
		console.log("VI");
		document.getElementById("VILevel").style.display = 'block';
		document.getElementById("MRLevel").style.display = 'none';
		document.getElementById("VILevel").appendChild(document.createElement('br'));
		//document.getElementById("nl").innerHtml='<br />';
		}
	else if(catValue==="MR"){
		console.log("MR");
		document.getElementById("MRLevel").style.display = 'block';
		document.getElementById("VILevel").style.display = 'none';
		document.getElementById("MRLevel").appendChild(document.createElement('br'));
		//document.getElementById("nl").innerHtml='<br />';
		}
	else{	
		document.getElementById("MRLevel").style.display = 'none';
		document.getElementById("VILevel").style.display = 'none';
		
		}
	eventDisplay();
}

function eventDisplay(){
	console.log('Displaying Events');
	var age         	=   document.getElementById("age");
	var gender        	=   document.getElementById("gender");
	var category        =   document.getElementById("category");
	var mrlevel         =   document.getElementById("mrlevel");
	var vilevel         =   document.getElementById("vilevel");
	var ageValue		=	age.value;
	var genderValue		=	gender.value;
	var catValue		=	category.value;
	var mrlevelValue	=	mrlevel.value;
	var vilevelValue	=	vilevel.value;
	var eventsClass     =   Parse.Object.extend("EVENTS");
	var container       =   document.getElementById('eventRow');
    var query           =   new Parse.Query(eventsClass);
	query.equalTo("GENDER", genderValue);
    query.lessThanOrEqualTo("AGE_MIN", parseInt(ageValue));
    query.greaterThanOrEqualTo("AGE_MAX", parseInt(ageValue));
    query.equalTo("D_Category", catValue);
	if(catValue == "MR") {
        query.equalTo("D_Level_1_2_3", parseInt(mrlevelValue));
		console.log(parseInt(mrlevelValue));
    } else if (catValue == "VI") {
        query.equalTo("D_Level_1_2_3", parseInt(vilevelValue));
		console.log(parseInt(vilevelValue));
    }
	query.limit(1000);
	query.find({
        success:function(results) {
			console.log('Successfully Retrieved');
			console.log(results);
			console.log(results.length);
			while (container.hasChildNodes()) {
                container.removeChild(container.lastChild);
            }
			populateEventCellWithEvents(results);
        }, 
        error: function(error) {
            console.log('Failure retrieveing events: ' + error.message );
        }
    });
};

function populateEventCellWithEvents(events) {
    var container           =   document.getElementById('eventRow');
    events.forEach(function(event) {
        //console.log(event.id);
        var checkbox =   document.createElement('input');
        checkbox.type       =   "checkbox";
        checkbox.id         =   event.id;
        var label           =   document.createElement('label')
        label.htmlFor       =   event.id;
        label.appendChild(document.createTextNode(event.get('EVENT_NAME')));
        container.appendChild(checkbox);
        container.appendChild(label);
        container.appendChild(document.createElement('br'));
		
    });
	
};

                //2K16
                Parse.initialize("xDSozIKPzcsfEtMJSUpqh88nIJ8gyBZOFpmJIjn0", "rqLvdUmxNKcm8o6tLv9aSCabWHxoi4p6ziJ8wDog");

function checkIndividual(){

	var name            =   document.getElementById("studName");
	var roll          	=   document.getElementById("roll");
	var age         	=   document.getElementById("age");
	var gender        	=   document.getElementById("gender");
	var category        =   document.getElementById("category");
	var mrlevel         =   document.getElementById("mrlevel");
	var vilevel         =   document.getElementById("vilevel");
	//var schoolName      =   document.getElementById("schoolName");
	var contact         =   document.getElementById("phone");
	var email           =   document.getElementById("email");
	
	
    var nameValue       =   name.value;
    var rollValue    	=   roll.value;
	var ageValue		=	age.value;
	var genderValue		=	gender.value;
	var catValue		=	category.value;
	var mrlevelValue	=	mrlevel.value;
	var vilevelValue	=	vilevel.value;
	var schoolNameValue	=	"individual";
	var contactValue    =   contact.value;
	var emailValue      =   email.value;
	
    var atpos = emailValue.indexOf("@");
    var dotpos = emailValue.lastIndexOf(".");
	var inputElems = document.getElementsByTagName("input"),
    count = 0;
	for (var i=0; i<inputElems.length; i++) {
    if (inputElems[i].type === "checkbox" && inputElems[i].checked === true) {
        count++;
    }
	}
	
	/*
			console.log(nameValue);
			console.log(rollValue);
			console.log(ageValue);
			console.log(genderValue);
			console.log(catValue);
			
			console.log(schoolNameValue);
			console.log(contactValue);
			console.log(emailValue);
	
	*/
	
	if(nameValue.length<5)
        alert("Student Name should contain atleast 5 characters!!");
		else if (rollValue.langth==="")
			alert("Please enter a valid Roll Number");
			else if(isNaN(ageValue))
			alert("Please enter a valid Age");
			else if(ageValue.length===0)
				alert("Pleaseenter a valid age");
			else if (ageValue<6)
			alert("Age has to be more than 5");
				else if (ageValue>25)
				alert("Age has to be less than 26");
					else if (contactValue== "")
					alert("You didn't enter a phone number.");
						else if (isNaN(contactValue)) 
						alert("The phone number contains invalid characters.");
							else if (!(contactValue.length == 10)) 
							alert("The phone number is the wrong length. \nPlease enter 10 digit mobile no.");
								else if (atpos< 1 || dotpos<atpos+2 || dotpos+2>=emailValue.length)
								alert("This doesn't seem to a Valid email-id");
									else if(count>2)
									alert("Only 2 events can be selected!");
										else if(count===0)
										alert("Atleast 1 event has to be selected!");
											else{
												//registerButtonClick();
												individualSave();
												console.log("DONE");
											
}

};

function individualSave(){

    var school     =   Parse.Object.extend("User");
    var squery          =   new Parse.Query(school);
    //var IndSchoolNameValue = null;
    //console.log(sessionStorage.school);
	squery.get("r0Cm8lsArl", {
        success:function(sobj) {
            console.log(sobj.attributes);
            IndSchoolNameValue = sobj;
            console.log(IndSchoolNameValue);
    var categoryValue       =   document.getElementById("category");
    var eventCell           =   $("#eventRow");
    var checkedBoxes        =   eventCell.find(":checked")
	 
	var name            =   document.getElementById("studName");
	var roll          	=   document.getElementById("roll");
	var age         	=   document.getElementById("age");
	var gender        	=   document.getElementById("gender");
	var category        =   document.getElementById("category");
	var mrlevel         =   document.getElementById("mrlevel");
	var vilevel         =   document.getElementById("vilevel");
	//var schoolName      =   document.getElementById("schoolName");
	var contact         =   document.getElementById("phone");
	var email           =   document.getElementById("email");
    var nameValue       =   name.value;
    var rollValue    	=   roll.value;
	var ageValue		=	age.value;
	var genderValue		=	gender.value;
	var catValue		=	category.value;
	var mrlevelValue	=	mrlevel.value;
	var vilevelValue	=	vilevel.value;
	//var schoolNameValue	=	schoolName.value;
	var contactValue    =   contact.value;
	var emailValue      =   email.value;
    //showOverlayOnRowIndex(index);
	var DETAIL     =   Parse.Object.extend("Student");
    var details    =	new DETAIL;
    details.set("USERNAME", nameValue);
    console.log("Good Going");
    details.set("ROLLNUMBER",rollValue);
    details.set("GENDER",genderValue);
    details.set("AGE", ageValue);
    details.set("CATEGORY", catValue);
    details.set("event1", null);
    details.set("event2", null);
    details.set('school', IndSchoolNameValue);
	details.set('EMAIL', emailValue);
	details.set('PHONE', contactValue);
    if(catValue == "MR") {
        details.set("LEVEL", mrlevelValue);
    } else if (catValue == "VI") {
        details.set("LEVEL", vilevelValue);
    }
	console.log('go on');
	var checkLength         =   checkedBoxes.length;
    checkedBoxes.each(function(i) {
        var eventsClass     =   Parse.Object.extend("EVENTS");
        var query           =   new Parse.Query(eventsClass);
        query.get(this.getAttribute('id'), {
            success:function(obj) {
                if (i == 0) {
                    details.set('event1', obj);
                } else if (i == 1) {
                    details.set('event2', obj);
                }
                if (i == checkLength - 1) {
                    details.save(null, {
                        success: function(studentObj) {
                            alert("You have been successfully registered!");
                            window.location= "index.html";
                        },
                        error: function(studentObj, error) {
                            alert('Failed to create new object, with error code: ' + error.message);
                        }
                    });
                }
				
				
            }, error: function (obj) {
            }
        });
    });
            console.log("School Name Saved!");
        }, error:function(sobj, serr) {
            console.log('Error fetching school' + serr.message);
        }
    });

				
};

function levelDisplay(){
	var category        =   document.getElementById("category");
	var catValue		=	category.value;
	if(catValue==="VI"){
		console.log("VI");
		document.getElementById("VILevel").style.display = 'block';
		document.getElementById("MRLevel").style.display = 'none';
		document.getElementById("VILevel").appendChild(document.createElement('br'));
		//document.getElementById("nl").innerHtml='<br />';
		}
	else if(catValue==="MR"){
		console.log("MR");
		document.getElementById("MRLevel").style.display = 'block';
		document.getElementById("VILevel").style.display = 'none';
		document.getElementById("MRLevel").appendChild(document.createElement('br'));
		//document.getElementById("nl").innerHtml='<br />';
		}
	else{	
		document.getElementById("MRLevel").style.display = 'none';
		document.getElementById("VILevel").style.display = 'none';
		
		}
	//eventDisplay();
}

function indEventDisplay(){
  if(confirm("Are you sure that the given Details are true? You cannot alter your details!")){
	console.log('Displaying Events');

	var age         	=   document.getElementById("age");
	var gender        	=   document.getElementById("gender");
	var category        =   document.getElementById("category");
	var mrlevel         =   document.getElementById("mrlevel");
	var vilevel         =   document.getElementById("vilevel");
	var ageValue		=	age.value;
	var genderValue		=	gender.value;
	var catValue		=	category.value;
	var mrlevelValue	=	mrlevel.value;
	var vilevelValue	=	vilevel.value;
	var eventsClass     =   Parse.Object.extend("EVENTS");
	var container       =   document.getElementById('eventRow');
    var query           =   new Parse.Query(eventsClass);
	query.equalTo("GENDER", genderValue);
    query.lessThanOrEqualTo("AGE_MIN", parseInt(ageValue));
    query.greaterThanOrEqualTo("AGE_MAX", parseInt(ageValue));
    query.equalTo("D_Category", catValue);
	if(catValue == "MR") {
        query.equalTo("D_Level_1_2_3", parseInt(mrlevelValue));
		console.log(parseInt(mrlevelValue));
    } else if (catValue == "VI") {
        query.equalTo("D_Level_1_2_3", parseInt(vilevelValue));
		console.log(parseInt(vilevelValue));
    }
	query.limit(1000);
	query.find({
        success:function(results) {
			console.log('Successfully Retrieved');
			console.log(results);
			console.log(results.length);
			while (container.hasChildNodes()) {
                container.removeChild(container.lastChild);
            }
			populateEventCellWithEvents(results);
        }, 
        error: function(error) {
            console.log('Failure retrieveing events: ' + error.message );
        }
    });

  document.getElementById("age").setAttribute("disabled", true);
	document.getElementById("gender").setAttribute("disabled", true);
	document.getElementById("category").setAttribute("disabled", true);
	document.getElementById("mrlevel").setAttribute("disabled", true);
	document.getElementById("vilevel").setAttribute("disabled", true);
  }
};

function populateEventCellWithEvents(events) {
    var container           =   document.getElementById('eventRow');
    events.forEach(function(event) {
        //console.log(event.id);
        var checkbox =   document.createElement('input');
        checkbox.type       =   "checkbox";
        checkbox.id         =   event.id;
        var label           =   document.createElement('label')
        label.htmlFor       =   event.id;
        label.appendChild(document.createTextNode(event.get('EVENT_NAME')));
        container.appendChild(checkbox);
        container.appendChild(label);
        container.appendChild(document.createElement('br'));
		
    });
	
};

</script>						
