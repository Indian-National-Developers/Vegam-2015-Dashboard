<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Sunil, Priya, Thina, saiy2k">
        <title> School Registration | Vegam 2k15</title>
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
        <link type="text/css" rel="stylesheet" href="vegam.css"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.2.min.js"></script>

    </head>

    <body>

        <!-- Top section contains the Vegam Title and Page Title -->
        <div class="header"> 
            <h1> <a href="index.html"> Vegam 2k15 </a> </h1>
            <h3> School Registration </h3>
        </div>

        <!-- Main cotent section that contains all the page controls -->
        <div class="content">
            <div class="halfColumn" style="margin-left:30%; width: 60%">
                <div class="smallLabel"> School Name*    </div> <input style="width: 34%;" type="text"       id="schoolname" /> <br/> <br/>
                <div class="smallLabel"> Branch Name*    </div> <input style="width: 34%;" type="text"       id="branchname" /> <br/> <br/>
				<div class="smallLabel"> Contact No*    </div> <input style="width: 34%;" type="text"       id='contact' /> <br/> <br/>
                <div class="smallLabel"> Email*         </div> <input style="width: 34%;" type="text"       id='email' /> <br/> <br/>
				<div class="smallLabel"> Password*       </div> <input style="width: 34%;" type="password"   id='password' /> <br/> <br/>
                <div class="smallLabel"> Confirm Password*   </div> <input style="width: 34%;" type="password"   id='conpass' /> <br/> <br/>                             
                <div class="smallLabel"> Address*        </div> <textarea id="address" rows=3 style="width: 34%;"> </textarea> <br/> <br/>
                <div class="button" onclick="checkButtonClick()" style="margin-left:20%"> Register </div>
            </div>
        </div>

        <!-- Floating logo stick to the bottom right of the screen -->
        <img class="logo" src="k.png"/>

        <!-- Footer that sticks to the bottom of the screen (not document) -->
        <p class="footer"> <a href="http://chennaisocialservice.org/"> Chennai Social Service </a> - Powered by <a href="https://plus.google.com/u/0/communities/104455776462402572964">Indian National Developers</a>. Use <a href="https://www.google.com/chrome/browser/desktop/">Chrome</a>, <a href="https://www.mozilla.org/en-US/firefox/new/">Firefox</a> to properly use this site.</p>

</body>
</html>

<script type="text/javascript">

    $( document ).ready(function() {

    });

//Parse.initialize("avx8N1dxzO7BU1QTkrSGC0ibcowObI9Q4kvikfn2", "ndSz3O9ZMkpjQtaRUrNcLOsVHfbWT9hwxaxSSgO5");
Parse.initialize("BlYcmQmAAvCsDdanA7TJh14KiHrCCqb3z5vPz1Ay", "ovGdJ7e9MJ0wqqcsadYauC9t5aiXvluiuqBrvf3x");

function registerButtonClick(){	
	var name            =   document.getElementById("schoolname");
	var branch          =   document.getElementById("branchname");
	var pass            =   document.getElementById("password");
	var email           =   document.getElementById("email");
	var contact         =   document.getElementById("contact");
	var address         =   document.getElementById("address");
    var nameValue       =   name.value;
    var branchValue     =   branch.value;
	var passValue       =   pass.value;
	var emailValue      =   email.value;
	var contactValue    =   contact.value;
	var addressValue    =   address.value;
	
	var schoolReg       =   new Parse.User();
	schoolReg.set("username", nameValue + ' - ' + branchValue);
	schoolReg.set("password", passValue);
	schoolReg.set("email", emailValue);;
	schoolReg.set("address", addressValue);
	schoolReg.set("contact", contactValue);;
	schoolReg.signUp(null, {
        success: function(schoolReg) {
            window.location=    "index.html";
			alert("Your School has been successfully registered!");
        },
        error: function(schoolReg, error) {
            console.log(error);
            alert('Failed to create new object, with error code: ' + error.message);
        }
    });
};

function checkButtonClick(){

	var name            =   document.getElementById("schoolname").value;
	var branch          =   document.getElementById("branchname").value;
	var pass            =   document.getElementById("password").value;
	var con             =   document.getElementById("conpass").value;
	var email           =   document.getElementById("email").value;
	var atpos           =   email.indexOf("@");
    var dotpos          =   email.lastIndexOf(".");
	var contact         =   document.getElementById("contact").value;
	var address         =   document.getElementById("address").value;
	
	if(name.length<5)
        alert("Schoolname should contain atleast 5 characters!!");
    else if(branch.length<2)
        alert("Branchname should contain atleast 2 characters!!");
    else if (contact== "") 
        alert("You didn't enter a phone number.");
    else if (isNaN(contact)) 
        alert("The phone number contains invalid characters.");
    else if (!(contact.length == 10)) 
        alert("The phone number is the wrong length. \nPlease enter 10 digit mobile no.");
	else if (atpos<1 || dotpos<atpos+2 || dotpos+2>= email.length)
        alert("This doesn't seem to a Valid email-id");
	else if(pass.length<4)
        alert("PASSWORD should contain atleast 4 characters!!");
	else if(con != pass)
        alert("PASSWORD does not match!!");
    else if(address.length<6)
        alert("This doesn't seem to a Valid Address!");
    else{
        registerButtonClick();
    }
};
	
</script>						
